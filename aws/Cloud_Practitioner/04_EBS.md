## EBS(Amazon Elastic Block Store)

EC2インスタンス用のストレージ

### 特徴

- HDDタイプとSSDタイプが選択できる（後から変更することも可能）
- 従量課金制（容量が伸縮自在）
- スナップショットを使用したバックアップ
- ブロックレベルのレプリケーションをしており、物理的なHDDよりも耐久性が高い

スナップショットからインスタンスを生成することができ、それを別リージョンに配置することで高い可用性を実現できる

### デモ

コンソールから操作する場合はまずEC2を選択する

EBSのVolumesを選択するとEBSの一覧を見ることができる(追加もここから）

対応するEC2と同じリージョンに作成しなければならない

HDDとSSD(gp2）を選択して生成

生成したインスタンスにTagNameをつけることができる（Nameフィールド）

TagNameをつけておくと、コストを見るときに役に立つ（タグごとの請求金額を調べることができる）

### EC2にアタッチ

Create Volumeの隣の Actions > Attach Volumeを選択

アタッチするEC2インスタンスを選択して、アタッチする

アタッチしたEC2にSSHで入って`lsblk`コマンドを実行すると、先程アタッチしたEBSが確認できる

`sudo mke2fs /dev/xvdb[=EBSのディスクパス]`でファイルシステムを生成する

そうすることで、EC2のLinuxマシン上にマウントできるようになるらしい

Linuxの場合は、`mount /dev/xvdb /mnt`でマウントする

マウントすることでファイルの作成など、ディスクでできることがすべてできるようになる

### Detouchする

VolumesのActionsからデタッチできる

デタッチをするとStateが`in-use`から`avalable`に変わる

一度デタッチをして、別のEC2インスタンスにアタッチすることもできる





