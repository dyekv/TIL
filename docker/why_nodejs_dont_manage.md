# なぜ、Node.jsはコンテナ化せずにnodenvなどでバージョン管理するのか

### npm(yarn)でパッケージを入れる際に、バイナリ化することがあるため

ここで言うバイナリとは、実行ファイルのこと

実行ファイルはOSの互換性が無いため、コンテナで別OSを使っていると動かない

※ たとえば、`.exe`は`windows`でしか使えない

そのため、ホスト側(Mac）で`yarn add hoge`とすると、`node_modules`にバイナリ化された`hoge`がインストールされることがある

コンテナのOSはlinuxであるため、実行できなくなる

パッケージを追加する際にコンテナに入ってyarnを実行すれば、バイナリ化されてもlinuxで実行できる

ただ、その場合は、コンテナ内の`node_modules`にパッケージが追加されるため、  
`yarn dev`などもコンテナ内で実行しなければならない（常にコンテナ内での開発）

dockerignoreを使ってホスト側の`node_modules`を隠蔽すれば、コンテナ外でも開発できるっぽい

[[ 参考サイト ]](https://www.creationline.com/lab/29422)

### PHPは？

phpも`composer`を使ってパッケージ管理をしている

`composer`はnpmのようにパッケージをバイナリ化することが無い（めったにない？）ため、  
異なるOS（mac）で`composer`を実行しても`vender`内は同じになる

つまりコンテナ化したPHPを使っていても、`composer`自体は、ホスト側のものを使っている


